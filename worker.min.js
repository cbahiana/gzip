"use strict";let CACHE_NAME="rs-worker";self.addEventListener("activate",function(e){e.waitUntil(caches.keys().then(function(e){return Promise.all(e.map(function(e){if(e!==CACHE_NAME)return caches.delete(e)}))}))}),self.addEventListener("message",function(e){switch(e.data.action){case"addFiles":e.waitUntil(caches.open(CACHE_NAME).then(function(t){t.addAll(e.data.files)}));break;case"removeFiles":e.waitUntil(caches.open(CACHE_NAME).then(function(t){for(let n of e.data.files)t.delete(n)}))}}),self.addEventListener("fetch",function(e){let t=e.request;e.respondWith(caches.match(t).then(function(n){return n||fetch(t).then(function(n){if(!n||200!=n.status||"GET"!=t.method||"basic"!=n.type)return n;let a=n.headers.getAll("Cache-Control").join();return a.match(/(\bno-store\b)|(\bno-cache\b)/)&&a.match(/(\bmust-revalidate\b)/)?n:(caches.open(CACHE_NAME).then(function(t){t.put(e.request,n)}),n.clone())})}))});
