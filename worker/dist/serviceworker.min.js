"use strict;";const e=Object.create(null);let t;self.addEventListener("install",function(e){e.waitUntil(self.skipWaiting())}),self.addEventListener("activate",function(e){e.waitUntil(self.clients.claim())}),self.addEventListener("fetch",n=>{if("GET"===n.request.method){const s=e.strategies,c=new URL(n.request.url);if(c.pathname.match(RegExp("{scope}/administrator/"))==t){let e=(c.pathname.match(RegExp("{scope}/media/z/([a-z]{2})/"))||[])[1];s.has(e)||(e="cn"),console.log({strategyToUse:e}),n.respondWith(s.get(e).handle(n))}}}),e.strategies=function(){const e=new Map,n={add:(t,n)=>e.set(t,{handle:n}),keys:()=>e.keys(),values:()=>e.values(),entries:()=>e.entries(),get:t=>e.get(t),has:t=>e.has(t),delete:t=>e.delete(t),isCacheableResponse:e=>{return console.log({response:e,type:e&&e.type,ok:e&&e.ok,bodyUsed:e&&e.bodyUsed}),console.log(Error().stack),e!=t&&"basic"==e.type&&e.ok&&!e.bodyUsed}};return n[Symbol.iterator]=(()=>e[Symbol.iterator]()),Object.defineProperty(n,"size",{get:()=>e.size}),n}(),e.strategies.add("nf",(n,s)=>{return fetch(n.request).then(s=>{if(s==t)throw Error("Network error");if(e.strategies.isCacheableResponse(s)){const e=s.clone();caches.open("v1").then(function(t){t.put(n.request,e)})}return s}).catch(()=>s.match(n.request))}),e.strategies.add("cf",n=>{return caches.match(n.request).then(s=>{return s!=t?s:fetch(n.request).then(t=>{if(e.strategies.isCacheableResponse(t)){const e=t.clone();caches.open("v1").then(function(t){t.put(n.request,e)})}return t})})}),e.strategies.add("cn",function(t){return caches.match(t.request).then(function(n){const s=fetch(t.request).then(function(n){if(e.strategies.isCacheableResponse(n)){console.log("cache put "+t.request.url);const e=n.clone();caches.open("v1").then(function(n){n.put(t.request,e)})}else console.log("cannot put "+t.request.url);return n});return n||s})}),e.strategies.add("no",e=>fetch(e.request)),e.strategies.add("co",e=>caches.match(e.request));
