"use strict;";const e=Object.create(null);let t;self.addEventListener("install",function(e){e.waitUntil(self.skipWaiting())}),self.addEventListener("activate",function(e){caches.keys().then(function(e){return"{CACHE_NAME}".split(/_/,2),Promise.all(e.map(e=>0==e.indexOf("{CACHE_")&&"{CACHE_NAME}"!=e&&caches.delete(e)))}),e.waitUntil(self.clients.claim())}),self.addEventListener("fetch",n=>{if("GET"!==n.request.method)return;const s=e.strategies;let r=(new URL(n.request.url).pathname.match(RegExp("{scope}/media/z/([a-z]{2})/"))||[])[1];r==t&&(r="{defaultStrategy}"),s.has(r)||(r="no"),0!=n.request.url.indexOf("data:")&&n.respondWith(s.get(r).handle(n).catch(e=>fetch(n.request)))}),function(){function n(e){const s=!0===e,r=[].slice.call(arguments,1);let i,o,c,a;for(!0===s&&(e=r.shift()),i=0;i<r.length;i++){o=r[i];for(c in o)switch(typeof(a=o[c])){case"object":e[c]=1==s?n(s,a==t?a:Array.isArray(a)?[]:{},a):a;break;default:e[c]=a}}return e}function s(e){const i=r.getAllPropertiesName(e);let o,c,a=i.length;for(;a&&a--;)o=i[a],c=Object.getOwnPropertyDescriptor(e,o),e[o]!=t&&"object"==typeof e[o]&&c!=t&&"value"in c&&c.writable&&c.configurable&&(e[o]=n(!0,Array.isArray(e[o])?[]:{},s(e[o])));return e}const r={implement:function(e){function t(e,t,n){return function(){const s="previous"in this,r="parent"in this,i=this.previous,o=this.parent;this.previous=t,this.parent=n;const c=e.apply(this,arguments);return s&&(this.previous=i),r&&(this.parent=o),c}}const s=e.prototype,r=[].slice.call(arguments,1);let i,o,c;for(i=0;i<r.length;i++)for(c in r[i])switch(typeof(o=r[i][c])){case"function":s[c]=t(o,e[c],s[c]);break;case"object":s[c]=n(!0,Array.isArray(o)?[]:{},o);break;default:s[c]=o}return e},merge:n,reset:s,extendArgs:function(e){return function(t){if("object"==typeof t){const n=[].slice.call(arguments,1);let s;for(s in t)e.apply(this,[s,t[s]].concat(n))}else e.apply(this,arguments);return this}},getAllPropertiesName:function(e){const t=[];let n,s,r,i=e;do{for(n=Object.getOwnPropertyNames(i),r=0;r<n.length;r++)s=n[r],-1===t.indexOf(s)&&t.push(s)}while(i=Object.getPrototypeOf(i));return t}};e.Utils=r}(),function(){const n=e.Utils,s=n.extendArgs,r={$events:{},$pseudo:{},promisify:s(function(e,n,s){if(n==t)return;let r,i;const o=e=e.toLowerCase(),c={fn:n,cb:n,name:e,original:e,parsed:[e]};if(-1!=e.indexOf(":")){const n=e.match(/([^:]+):([^(]+)(\(([^)]+)\))?/);n==t?c.name=e=e.split(":",1)[0]:(c.original=e,c.name=n[1],c.parsed=n,e=n[1],n[2]in this.$pseudo&&this.$pseudo[n[2]](c))}e in this.$events||(this.$events[e]=[]),r=this.$events[e].length;for(;r&&r--;)if((i=this.$events[e][r]).fn==n&&i.original==o)return;Object.defineProperty(c,"sticky",{value:!!s}),this.$events[e].push(c)}),off:s(function(e,t,n){let s,r;e=e.toLowerCase().split(":",1)[0];const i=this.$events[e];if(void 0!=i){for(n=!!n,r=i.length;r&&r--;)s=i[r],(void 0!=t||n)&&(s.fn!=t||s.sticky&&s.sticky!=n)||this.$events[e].splice(r,1);0==i.length&&delete this.$events[e]}}),resolve:function(e){e=e.toLowerCase();const t=this,n=arguments.length>1?[].slice.call(arguments,1):[];return Promise.all((t.$events[e]||[]).concat().map(function(e){return new Promise(function(s){s(e.cb.apply(t,n))})}))},addPseudo:function(e,t){return this.$pseudo[e]=t,this}};r.addPseudo("once",function(e){return e.cb=function(){const t=e.fn.apply(this,arguments);return this.off(e.name,e.fn),t},this}),e.PromiseEvent=r,n.merge(!0,e,r)}(),e.strategies=function(){const n=new Map,s={add:(t,s)=>n.set(t,{handle:async t=>{await e.resolve("prefetch",t.request);const n=await s(t);return await e.resolve("postfetch",t.request,n),n}}),keys:()=>n.keys(),values:()=>n.values(),entries:()=>n.entries(),get:e=>n.get(e),has:e=>n.has(e),delete:e=>n.delete(e),isCacheableRequest:e=>["same-origin","cors"].includes(e.mode),isCacheableResponse:e=>e!=t&&"basic"==e.type&&e.ok&&!e.bodyUsed};return s[Symbol.iterator]=(()=>n[Symbol.iterator]()),Object.defineProperty(s,"size",{get:()=>n.size}),s}(),e.strategies.add("nf",async(n,s)=>{try{const s=await fetch(n.request);if(s==t)throw Error("Network error");if(e.strategies.isCacheableResponse(s)){const e=s.clone();caches.open("{CACHE_NAME}").then(function(t){t.put(n.request,e)})}return s}catch(e){}return s.match(n.request)}),e.strategies.add("cf",async n=>{let s=await caches.match(n.request);if(s!=t)return s;if(s=await fetch(n.request),e.strategies.isCacheableResponse(s)){const e=s.clone();caches.open("{CACHE_NAME}").then(function(t){t.put(n.request,e)})}return s}),e.strategies.add("cn",async t=>{const n=await caches.match(t.request),s=fetch(t.request).then(function(n){if(e.strategies.isCacheableResponse(n)){const e=n.clone();caches.open("{CACHE_NAME}").then(function(n){n.put(t.request,e)})}return n});return n||s}),e.strategies.add("no",e=>fetch(e.request)),e.strategies.add("co",e=>caches.match(e.request)),e.Filter=function(e){const n="prefetch.rule",s="postfetch.rule",r=new Map,i={Rules:{Prefetch:n,Postfetch:s},validators:r,addRule:(e,i)=>{if(e!=n&&e!=s)throw Error("Invalid rule type");let o=r.get(e);o==t&&(o=[],r.set(e,o)),o.push(i)}};return e.promisify({prefetch:function(e){const s=e.url,i=r.get(n);if(i!=t){let t=0;for(;t<i.length;t++)if(i[t](e))throw Error("Url not allowed "+s)}return e},postfetch:function(e,t){return t}}),i}(e),e.Filter.addRule(e.Filter.Rules.Prefetch,function(e){let t=14;for(;t&&t--;)if(-1==e.url.indexOf("{exclude_urls}"[t]))return!1;return!0});
