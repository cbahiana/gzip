'use strict';(function(r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).localforage=r()})(function(){return function y(f,u,w){function h(v,x){if(!u[v]){if(!f[v]){var q="function"==typeof require&&require;if(!x&&q)return q(v,true);if(t)return t(v,true);x=Error("Cannot find module '"+v+"'");throw x.code="MODULE_NOT_FOUND",
x;}x=u[v]={exports:{}};f[v][0].call(x.exports,function(a){return h(f[v][1][a]||a)},x,x.exports,y,f,u,w)}return u[v].exports}for(var t="function"==typeof require&&require,z=0;z<w.length;z++)h(w[z]);return h}({1:[function(f,u,w){(function(f){function h(){a=true;for(var k,f,h=d.length;h;){f=d;d=[];for(k=-1;++k<h;)f[k]();h=d.length}a=false}var t=f.MutationObserver||f.WebKitMutationObserver;if(t){var w=0;t=new t(h);var v=f.document.createTextNode("");t.observe(v,{characterData:true});var x=function(){v.data=
w=++w%2}}else if(f.setImmediate||void 0===f.MessageChannel)x="document"in f&&"onreadystatechange"in f.document.createElement("script")?function(){var a=f.document.createElement("script");a.onreadystatechange=function(){h();a.onreadystatechange=null;a.parentNode.removeChild(a);a=null};f.document.documentElement.appendChild(a)}:function(){setTimeout(h,0)};else{var q=new f.MessageChannel;q.port1.onmessage=h;x=function(){q.port2.postMessage(0)}}var a,d=[];u.exports=function(k){1!==d.push(k)||a||x()}}).call(this,
"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(f,u,w){function y(){}function h(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=N;this.queue=[];this.outcome=void 0;a!==y&&x(this,a)}function t(a,d,J){this.promise=a;"function"==typeof d&&(this.onFulfilled=d,this.callFulfilled=this.otherCallFulfilled);"function"==typeof J&&(this.onRejected=J,this.callRejected=this.otherCallRejected)}function z(l,
k,J){a(function(){try{var a=k(J)}catch(G){return d.reject(l,G)}a===l?d.reject(l,new TypeError("Cannot resolve promise with itself")):d.resolve(l,a)})}function v(a){var l=a&&a.then;if(a&&"object"==typeof a&&"function"==typeof l)return function(){l.apply(a,arguments)}}function x(a,k){function l(l){A||(A=true,d.reject(a,l))}function f(l){A||(A=true,d.resolve(a,l))}var A=false,h=q(function(){k(f,l)});"error"===h.status&&l(h.value)}function q(a,d){var l={};try{l.value=a(d);l.status="success"}catch(K){l.status=
"error";l.value=K}return l}var a=f(1),d={},k=["REJECTED"],F=["FULFILLED"],N=["PENDING"];u.exports=w=h;h.prototype.catch=function(a){return this.then(null,a)};h.prototype.then=function(a,d){if("function"!=typeof a&&this.state===F||"function"!=typeof d&&this.state===k)return this;var l=new this.constructor(y);return this.state!==N?z(l,this.state===F?a:d,this.outcome):this.queue.push(new t(l,a,d)),l};t.prototype.callFulfilled=function(a){d.resolve(this.promise,a)};t.prototype.otherCallFulfilled=function(a){z(this.promise,
this.onFulfilled,a)};t.prototype.callRejected=function(a){d.reject(this.promise,a)};t.prototype.otherCallRejected=function(a){z(this.promise,this.onRejected,a)};d.resolve=function(a,k){var l=q(v,k);if("error"===l.status)return d.reject(a,l.value);if(l=l.value)x(a,l);else{a.state=F;a.outcome=k;l=-1;for(var f=a.queue.length;++l<f;)a.queue[l].callFulfilled(k)}return a};d.reject=function(a,d){a.state=k;a.outcome=d;for(var l=-1,f=a.queue.length;++l<f;)a.queue[l].callRejected(d);return a};w.resolve=function(a){return a instanceof
this?a:d.resolve(new this(y),a)};w.reject=function(a){var l=new this(y);return d.reject(l,a)};w.all=function(a){var l=this;if("[object Array]"!=={}.toString.call(a))return this.reject(new TypeError("must be an array"));var k=a.length,f=false;if(!k)return this.resolve([]);for(var h=Array(k),F=0,n=-1,q=new this(y);++n<k;)(function(a,n){l.resolve(a).then(function(a){h[n]=a;++F!==k||f||(f=true,d.resolve(q,h))},function(a){f||(f=true,d.reject(q,a))})})(a[n],n);return q};w.race=function(a){var l=this;if("[object Array]"!==
{}.toString.call(a))return this.reject(new TypeError("must be an array"));var k=a.length,f=false;if(!k)return this.resolve([]);for(var h=-1,q=new this(y);++h<k;)(function(a){l.resolve(a).then(function(a){f||(f=true,d.resolve(q,a))},function(a){f||(f=true,d.reject(q,a))})})(a[h]);return q}},{1:1}],3:[function(f,u,w){u="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};"function"!=typeof u.Promise&&(u.Promise=f(2))},{2:2}],4:[function(f,u,w){function y(b,
c){b=b||[];c=c||{};try{return new Blob(b,c)}catch(p){if("TypeError"!==p.name)throw p;for(var e=new ("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),a=0;a<b.length;a+=1)e.append(b[a]);return e.getBlob(c.type)}}function h(b,c){c&&b.then(function(b){c(null,b)},function(b){c(b)})}function t(b,c,e){"function"==typeof c&&b.then(c);"function"==typeof e&&b.catch(e)}function z(b){b=B[b.name];var c=
{};c.promise=new n(function(b){c.resolve=b});b.deferredOperations.push(c);b.dbReady?b.dbReady=b.dbReady.then(function(){return c.promise}):b.dbReady=c.promise}function v(b,c){return new n(function(e,a){if(b.db){if(!c)return e(b.db);z(b);b.db.close()}var g=[b.name];c&&g.push(b.version);var m=K.open.apply(K,g);c&&(m.onupgradeneeded=function(c){var e=m.result;try{e.createObjectStore(b.storeName);c.oldVersion>1||e.createObjectStore(P)}catch(C){if("ConstraintError"!==C.name)throw C;console.warn('The database "'+
b.name+'" has been upgraded from version '+c.oldVersion+" to version "+c.newVersion+', but the storage "'+b.storeName+'" already exists.')}});m.onerror=function(c){c.preventDefault();a(m.error)};m.onsuccess=function(){var c=e(m.result);(c=B[b.name].deferredOperations.pop())&&c.resolve()}})}function x(b){for(var c=atob(b.data),e=c.length,a=new ArrayBuffer(e),p=new Uint8Array(a),m=0;e>m;m++)p[m]=c.charCodeAt(m);return y([a],{type:b.type})}function q(b){var c=this,e=c._initReady().then(function(){var b=
B[c._dbInfo.name];if(b&&b.dbReady)return b.dbReady});return t(e,b,b),e}function a(b,c,e){try{var a=b.db.transaction(b.storeName,c);e(null,a)}catch(p){if(!b.db||"InvalidStateError"===p.name)return function(c){z(c);for(var b=B[c.name].forages,a=0;a<b.length;a++)b[a]._dbInfo.db&&(b[a]._dbInfo.db.close(),b[a]._dbInfo.db=null);return v(c,false).then(function(c){for(var a=0;a<b.length;a++)b[a]._dbInfo.db=c}).catch(function(b){var a=B[c.name].deferredOperations.pop();a&&a.reject(b);throw b;})}(b).then(function(){var a=
b.db.transaction(b.storeName,c);e(null,a)});e(p)}}function d(b){var c=.75*b.length;var a=b.length,g=0;"\x3d"===b[b.length-1]&&(c--,"\x3d"===b[b.length-2]&&c--);var p=new ArrayBuffer(c),m=new Uint8Array(p);for(c=0;a>c;c+=4){var E=H.indexOf(b[c]);var d=H.indexOf(b[c+1]);var C=H.indexOf(b[c+2]);var I=H.indexOf(b[c+3]);m[g++]=E<<2|d>>4;m[g++]=(15&d)<<4|C>>2;m[g++]=(3&C)<<6|63&I}return p}function k(b){var c=new Uint8Array(b),a="";for(b=0;b<c.length;b+=3){a+=H[c[b]>>2];a+=H[(3&c[b])<<4|c[b+1]>>4];a+=H[(15&
c[b+1])<<2|c[b+2]>>6];a+=H[63&c[b+2]]}return c.length%3==2?a=a.substring(0,a.length-1)+"\x3d":c.length%3==1&&(a=a.substring(0,a.length-2)+"\x3d\x3d"),a}function F(b,c,a,g){var e=this;"string"!=typeof b&&(console.warn(b+" used as a key, but it is not a string."),b+="");var m=new n(function(m,p){e.ready().then(function(){void 0===c&&(c=null);var C=c,E=e._dbInfo;E.serializer.serialize(c,function(c,d){d?p(d):E.db.transaction(function(a){a.executeSql("INSERT OR REPLACE INTO "+E.storeName+" (key, value) VALUES (?, ?)",
[b,c],function(){m(C)},function(c,b){p(b)})},function(c){if(c.code===c.QUOTA_ERR){if(g>0)return void m(F.apply(e,[b,C,a,g-1]));p(c)}})})}).catch(p)});return h(m,a),m}function N(b,c){b[c]=function(){var a=arguments;return b.ready().then(function(){return b[c].apply(b,a)})}}function l(){for(var b=1;b<arguments.length;b++){var c=arguments[b];if(c)for(var a in c)c.hasOwnProperty(a)&&(V(c[a])?arguments[0][a]=c[a].slice():arguments[0][a]=c[a])}return arguments[0]}function A(b){for(var c in D)if(D.hasOwnProperty(c)&&
D[c]===b)return true;return false}var J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},K=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(b){}}();
"undefined"==typeof Promise&&f(3);var G,B,n=Promise,P="local-forage-detect-blob-support",Y={}.toString,Z={_driver:"asyncStorage",_initStorage:function(b){function c(){return n.resolve()}var a=this,g={db:null};if(b)for(var p in b)g[p]=b[p];B||(B={});var m=B[g.name];m||(m={forages:[],db:null,dbReady:null,deferredOperations:[]},B[g.name]=m);m.forages.push(a);a._initReady||(a._initReady=a.ready,a.ready=q);b=[];for(p=0;p<m.forages.length;p++){var E=m.forages[p];E!==a&&b.push(E._initReady().catch(c))}var d=
m.forages.slice(0);return n.all(b).then(function(){return g.db=m.db,v(g,false)}).then(function(c){g.db=c;var b=a._defaultConfig.version;if(g.db){var e=!g.db.objectStoreNames.contains(g.storeName),m=g.version>g.db.version;if(g.version<g.db.version&&(g.version!==b&&console.warn('The database "'+g.name+"\" can't be downgraded from version "+g.db.version+" to version "+g.version+"."),g.version=g.db.version),m||e){if(e){b=g.db.version+1;b>g.version&&(g.version=b)}b=true}else b=false}else b=true;return b?
v(g,true):c}).then(function(b){g.db=m.db=b;a._dbInfo=g;for(b=0;b<d.length;b++){var c=d[b];c!==a&&(c._dbInfo.db=g.db,c._dbInfo.version=g.version)}})},iterate:function(b,c){var e=this,g=new n(function(c,m){e.ready().then(function(){a(e._dbInfo,"readonly",function(a,g){if(a)return m(a);try{var p=g.objectStore(e._dbInfo.storeName).openCursor(),d=1;p.onsuccess=function(){var a=p.result;if(a){var e=a.value;e&&e.__local_forage_encoded_blob&&(e=x(e));e=b(e,a.key,d++);void 0!==e?c(e):a.continue()}else c()};
p.onerror=function(){m(p.error)}}catch(Q){m(Q)}})}).catch(m)});return h(g,c),g},getItem:function(b,c){var e=this;"string"!=typeof b&&(console.warn(b+" used as a key, but it is not a string."),b+="");var g=new n(function(c,m){e.ready().then(function(){a(e._dbInfo,"readonly",function(a,g){if(a)return m(a);try{var p=g.objectStore(e._dbInfo.storeName).get(b);p.onsuccess=function(){var b=p.result;void 0===b&&(b=null);b&&b.__local_forage_encoded_blob&&(b=x(b));c(b)};p.onerror=function(){m(p.error)}}catch(I){m(I)}})}).catch(m)});
return h(g,c),g},setItem:function(b,c,e){var g=this;"string"!=typeof b&&(console.warn(b+" used as a key, but it is not a string."),b+="");var p=new n(function(e,p){var m;g.ready().then(function(){return m=g._dbInfo,"[object Blob]"===Y.call(c)?function(b){return"boolean"==typeof G?n.resolve(G):function(b){return(new n(function(c){var a=b.transaction(P,"readwrite"),e=y([""]);a.objectStore(P).put(e,"key");a.onabort=function(b){b.preventDefault();b.stopPropagation();c(false)};a.oncomplete=function(){var b=
navigator.userAgent.match(/Chrome\/(\d+)/),a=navigator.userAgent.match(/Edge\//);c(a||!b||parseInt(b[1],10)>=43)}})).catch(function(){return false})}(b).then(function(b){return G=b})}(m.db).then(function(b){return b?c:function(b){return new n(function(c,a){var e=new FileReader;e.onerror=a;e.onloadend=function(a){a=btoa(a.target.result||"");c({__local_forage_encoded_blob:true,data:a,type:b.type})};e.readAsBinaryString(b)})}(c)}):c}).then(function(c){a(g._dbInfo,"readwrite",function(a,m){if(a)return p(a);
try{var d=m.objectStore(g._dbInfo.storeName).put(c,b);null===c&&(c=void 0);m.oncomplete=function(){void 0===c&&(c=null);e(c)};m.onabort=m.onerror=function(){p(d.error?d.error:d.transaction.error)}}catch(R){p(R)}})}).catch(p)});return h(p,e),p},removeItem:function(b,c){var e=this;"string"!=typeof b&&(console.warn(b+" used as a key, but it is not a string."),b+="");var g=new n(function(c,m){e.ready().then(function(){a(e._dbInfo,"readwrite",function(a,g){if(a)return m(a);try{var p=g.objectStore(e._dbInfo.storeName).delete(b);
g.oncomplete=function(){c()};g.onerror=function(){m(p.error)};g.onabort=function(){m(p.error?p.error:p.transaction.error)}}catch(I){m(I)}})}).catch(m)});return h(g,c),g},clear:function(b){var c=this,e=new n(function(b,e){c.ready().then(function(){a(c._dbInfo,"readwrite",function(a,g){if(a)return e(a);try{var m=g.objectStore(c._dbInfo.storeName).clear();g.oncomplete=function(){b()};g.onabort=g.onerror=function(){e(m.error?m.error:m.transaction.error)}}catch(C){e(C)}})}).catch(e)});return h(e,b),e},
length:function(b){var c=this,e=new n(function(b,e){c.ready().then(function(){a(c._dbInfo,"readonly",function(a,g){if(a)return e(a);try{var m=g.objectStore(c._dbInfo.storeName).count();m.onsuccess=function(){b(m.result)};m.onerror=function(){e(m.error)}}catch(C){e(C)}})}).catch(e)});return h(e,b),e},key:function(b,c){var e=this,g=new n(function(c,g){0>b?c(null):e.ready().then(function(){a(e._dbInfo,"readonly",function(a,m){if(a)return g(a);try{var p=false,d=m.objectStore(e._dbInfo.storeName).openCursor();
d.onsuccess=function(){var a=d.result;a?0===b?c(a.key):p?c(a.key):(p=true,a.advance(b)):c(null)};d.onerror=function(){g(d.error)}}catch(Q){g(Q)}})}).catch(g)});return h(g,c),g},keys:function(b){var c=this,e=new n(function(b,e){c.ready().then(function(){a(c._dbInfo,"readonly",function(a,g){if(a)return e(a);try{var m=g.objectStore(c._dbInfo.storeName).openCursor(),p=[];m.onsuccess=function(){var a=m.result;a?(p.push(a.key),a.continue()):b(p)};m.onerror=function(){e(m.error)}}catch(I){e(I)}})}).catch(e)});
return h(e,b),e}},H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W=/^~~local_forage_type~([^~]+)~/,X={}.toString,S={serialize:function(b,a){var c="";if(b&&(c=X.call(b)),b&&("[object ArrayBuffer]"===c||b.buffer&&"[object ArrayBuffer]"===X.call(b.buffer))){var g,p="__lfsc__:";b instanceof ArrayBuffer?(g=b,p+="arbf"):(g=b.buffer,"[object Int8Array]"===c?p+="si08":"[object Uint8Array]"===c?p+="ui08":"[object Uint8ClampedArray]"===c?p+="uic8":"[object Int16Array]"===c?p+="si16":"[object Uint16Array]"===
c?p+="ur16":"[object Int32Array]"===c?p+="si32":"[object Uint32Array]"===c?p+="ui32":"[object Float32Array]"===c?p+="fl32":"[object Float64Array]"===c?p+="fl64":a(Error("Failed to get type for BinaryArray")));a(p+k(g))}else if("[object Blob]"===c){c=new FileReader;c.onload=function(){var c="~~local_forage_type~"+b.type+"~"+k(this.result);a("__lfsc__:blob"+c)};c.readAsArrayBuffer(b)}else try{a(JSON.stringify(b))}catch(m){console.error("Couldn't convert value into a JSON string: ",b);a(null,m)}},deserialize:function(a){if(a.substring(0,
9)!=="__lfsc__:")return JSON.parse(a);var c=a.substring(13);a=a.substring(9,13);if("blob"===a&&W.test(c)){var b=c.match(W);var g=b[1];c=c.substring(b[0].length)}c=d(c);switch(a){case "arbf":return c;case "blob":return y([c],{type:g});case "si08":return new Int8Array(c);case "ui08":return new Uint8Array(c);case "uic8":return new Uint8ClampedArray(c);case "si16":return new Int16Array(c);case "ur16":return new Uint16Array(c);case "si32":return new Int32Array(c);case "ui32":return new Uint32Array(c);
case "fl32":return new Float32Array(c);case "fl64":return new Float64Array(c);default:throw Error("Unkown type: "+a);}},stringToBuffer:d,bufferToString:k},aa={_driver:"webSQLStorage",_initStorage:function(a){var c=this,b={db:null};if(a)for(var g in a)b[g]="string"!=typeof a[g]?""+a[g]:a[g];a=new n(function(a,e){try{b.db=openDatabase(b.name,b.version+"",b.description,b.size)}catch(E){return e(E)}b.db.transaction(function(g){g.executeSql("CREATE TABLE IF NOT EXISTS "+b.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",
[],function(){c._dbInfo=b;a()},function(a,c){e(c)})})});return b.serializer=S,a},iterate:function(a,c){var b=this,g=new n(function(c,e){b.ready().then(function(){var g=b._dbInfo;g.db.transaction(function(b){b.executeSql("SELECT * FROM "+g.storeName,[],function(b,e){b=e.rows;e=b.length;for(var m=0;e>m;m++){var p=b.item(m),d=p.value;if(d&&(d=g.serializer.deserialize(d)),void 0!==(d=a(d,p.key,m+1)))return void c(d)}c()},function(a,c){e(c)})})}).catch(e)});return h(g,c),g},getItem:function(a,c){var b=
this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a+="");var g=new n(function(c,e){b.ready().then(function(){var g=b._dbInfo;g.db.transaction(function(b){b.executeSql("SELECT * FROM "+g.storeName+" WHERE key \x3d ? LIMIT 1",[a],function(a,b){(a=b.rows.length?b.rows.item(0).value:null)&&(a=g.serializer.deserialize(a));c(a)},function(a,c){e(c)})})}).catch(e)});return h(g,c),g},setItem:function(a,c,e){return F.apply(this,[a,c,e,1])},removeItem:function(a,c){var b=this;
"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a+="");var g=new n(function(c,e){b.ready().then(function(){var g=b._dbInfo;g.db.transaction(function(b){b.executeSql("DELETE FROM "+g.storeName+" WHERE key \x3d ?",[a],function(){c()},function(a,c){e(c)})})}).catch(e)});return h(g,c),g},clear:function(a){var c=this,b=new n(function(a,b){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("DELETE FROM "+e.storeName,[],function(){a()},function(a,
c){b(c)})})}).catch(b)});return h(b,a),b},length:function(a){var c=this,b=new n(function(a,b){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("SELECT COUNT(key) as c FROM "+e.storeName,[],function(c,b){c=b.rows.item(0).c;a(c)},function(a,c){b(c)})})}).catch(b)});return h(b,a),b},key:function(a,c){var b=this,g=new n(function(c,e){b.ready().then(function(){var g=b._dbInfo;g.db.transaction(function(b){b.executeSql("SELECT key FROM "+g.storeName+" WHERE id \x3d ? LIMIT 1",
[a+1],function(a,b){a=b.rows.length?b.rows.item(0).key:null;c(a)},function(a,c){e(c)})})}).catch(e)});return h(g,c),g},keys:function(a){var c=this,b=new n(function(a,b){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("SELECT key FROM "+e.storeName,[],function(c,b){c=[];for(var e=0;e<b.rows.length;e++)c.push(b.rows.item(e).key);a(c)},function(a,c){b(c)})})}).catch(b)});return h(b,a),b}},ba={_driver:"localStorageWrapper",_initStorage:function(a){var c={};if(a)for(var b in a)c[b]=
a[b];return c.keyPrefix=c.name+"/",c.storeName!==this._defaultConfig.storeName&&(c.keyPrefix=c.keyPrefix+(c.storeName+"/")),this._dbInfo=c,c.serializer=S,n.resolve()},iterate:function(a,c){var b=this,g=b.ready().then(function(){for(var c=b._dbInfo,e=c.keyPrefix,g=e.length,d=localStorage.length,l=1,k=0;d>k;k++){var n=localStorage.key(k);if(0===n.indexOf(e)){var f=localStorage.getItem(n);if(f&&(f=c.serializer.deserialize(f)),void 0!==(f=a(f,n.substring(g),l++)))return f}}});return h(g,c),g},getItem:function(a,
c){var b=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a+="");var g=b.ready().then(function(){var c=b._dbInfo,e=localStorage.getItem(c.keyPrefix+a);return e&&(e=c.serializer.deserialize(e)),e});return h(g,c),g},setItem:function(a,c,e){var b=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a+="");var d=b.ready().then(function(){void 0===c&&(c=null);var e=c;return new n(function(g,d){var m=b._dbInfo;m.serializer.serialize(c,function(c,
b){if(b)d(b);else try{localStorage.setItem(m.keyPrefix+a,c);g(e)}catch(O){"QuotaExceededError"!==O.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==O.name||d(O);d(O)}})})});return h(d,e),d},removeItem:function(a,c){var b=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a+="");var g=b.ready().then(function(){localStorage.removeItem(b._dbInfo.keyPrefix+a)});return h(g,c),g},clear:function(a){var c=this,b=c.ready().then(function(){for(var a=c._dbInfo.keyPrefix,b=localStorage.length-
1;b>=0;b--){var e=localStorage.key(b);0===e.indexOf(a)&&localStorage.removeItem(e)}});return h(b,a),b},length:function(a){var c=this.keys().then(function(a){return a.length});return h(c,a),c},key:function(a,c){var b=this,g=b.ready().then(function(){var c=b._dbInfo;try{var e=localStorage.key(a)}catch(E){e=null}return e&&(e=e.substring(c.keyPrefix.length)),e});return h(g,c),g},keys:function(a){var c=this,b=c.ready().then(function(){for(var a=c._dbInfo,b=localStorage.length,e=[],d=0;b>d;d++)0===localStorage.key(d).indexOf(a.keyPrefix)&&
e.push(localStorage.key(d).substring(a.keyPrefix.length));return e});return h(b,a),b}},T={},D={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},U=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],ca={description:"",driver:[D.INDEXEDDB,D.WEBSQL,D.LOCALSTORAGE].slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},L={};f=(L[D.INDEXEDDB]=function(){try{if(!K)return false;var a="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&
!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),c="function"==typeof fetch&&-1!==(""+fetch).indexOf("[native code");return(!a||c)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return false}}(),L[D.WEBSQL]="function"==typeof openDatabase);f=D.LOCALSTORAGE;a:{try{var M="undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem;break a}catch(b){M=false;break a}M=void 0}L[f]=M;var V=Array.isArray||function(a){return"[object Array]"===
{}.toString.call(a)};M=new (function(){function a(c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.INDEXEDDB=D.INDEXEDDB;this.LOCALSTORAGE=D.LOCALSTORAGE;this.WEBSQL=D.WEBSQL;this._defaultConfig=l({},ca);this._config=l({},this._defaultConfig,c);this._initDriver=this._driverSet=null;this._ready=false;this._dbInfo=null;this._wrapLibraryMethodsWithReady();this.setDriver(this._config.driver).catch(function(){})}return a.prototype.config=function(a){if("object"===
(void 0===a?"undefined":J(a))){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var c in a){if("storeName"===c&&(a[c]=a[c].replace(/\W/g,"_")),"version"===c&&"number"!=typeof a[c])return Error("Database version must be a number.");this._config[c]=a[c]}return!("driver"in a&&a.driver)||this.setDriver(this._config.driver)}return"string"==typeof a?this._config[a]:this._config},a.prototype.defineDriver=function(a,b,g){var c=new n(function(c,b){try{var e=a._driver,
g=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),d=Error("Custom driver name already in use: "+a._driver);if(!a._driver)return void b(g);if(A(a._driver))return void b(d);var m=U.concat("_initStorage");for(d=0;d<m.length;d++){var k=m[d];if(!k||!a[k]||"function"!=typeof a[k])return void b(g)}g=function(b){L[e]=b;T[e]=a;c()};"_support"in a?a._support&&"function"==typeof a._support?a._support().then(g,b):g(!!a._support):g(true)}catch(R){b(R)}});return t(c,
b,g),c},a.prototype.driver=function(){return this._driver||null},a.prototype.getDriver=function(a,b,g){var c=this,e=n.resolve().then(function(){if(!A(a)){if(T[a])return T[a];throw Error("Driver not found.");}switch(a){case c.INDEXEDDB:return Z;case c.LOCALSTORAGE:return ba;case c.WEBSQL:return aa}});return t(e,b,g),e},a.prototype.getSerializer=function(a){var c=n.resolve(S);return t(c,a),c},a.prototype.ready=function(a){var c=this,b=c._driverSet.then(function(){return null===c._ready&&(c._ready=c._initDriver()),
c._ready});return t(b,a,a),b},a.prototype.setDriver=function(a,b,g){function c(){d._config.driver=d.driver()}function e(a){return d._extend(a),c(),d._ready=d._initStorage(d._config),d._ready}var d=this;V(a)||(a=[a]);var k=this._getSupportedDrivers(a);return this._driverSet=(null!==this._driverSet?this._driverSet.catch(function(){return n.resolve()}):n.resolve()).then(function(){var a=k[0];return d._dbInfo=null,d._ready=null,d.getDriver(a).then(function(a){d._driver=a._driver;c();d._wrapLibraryMethodsWithReady();
d._initDriver=function(a){return function(){function b(){for(;g<a.length;){var k=a[g];return g++,d._dbInfo=null,d._ready=null,d.getDriver(k).then(e).catch(b)}c();return d._driverSet=n.reject(Error("No available storage method found.")),d._driverSet}var g=0;return b()}}(k)})}).catch(function(){c();return d._driverSet=n.reject(Error("No available storage method found.")),d._driverSet}),t(this._driverSet,b,g),this._driverSet},a.prototype.supports=function(a){return!!L[a]},a.prototype._extend=function(a){l(this,
a)},a.prototype._getSupportedDrivers=function(a){for(var c=[],b=0,d=a.length;d>b;b++){var k=a[b];this.supports(k)&&c.push(k)}return c},a.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0;a<U.length;a++)N(this,U[a])},a.prototype.createInstance=function(b){return new a(b)},a}());u.exports=M},{3:3}]},{},[4])(4)});
(function(r,f){"object"==typeof exports&&"undefined"!=typeof module?f(exports,require("localforage")):"function"==typeof define&&define.amd?define(["exports","localforage"],f):f(r.localforageGetItems=r.localforageGetItems||{},r.localforage)})(this,function(r,f){function u(a){return u.result?u.result:a&&"function"==typeof a.getSerializer?u.result=a.getSerializer():Promise.reject(Error("localforage.getSerializer() was not available! localforage v1.4+ is required!"))}function w(a,d){return d&&a.then(function(a){d(null,
a)},function(a){d(a)}),a}function y(a,d){var k=this.getItem(a).then(function(d){return{key:a,value:d}});return w(k,d),k}function h(a){var d=this;return new Promise(function(k,f){for(var h=[],l=0,q=a.length;q>l;l++)h.push(y.call(d,a[l]));Promise.all(h).then(function(a){for(var d={},f=0,l=a.length;l>f;f++){var n=a[f];d[n.key]=n.value}k(d)}).catch(f)})}function t(a){function d(a,d){return d>a?-1:a>d?1:0}var k=this;return new Promise(function(f,h){k.ready().then(function(){var l=k._dbInfo;l=l.db.transaction(l.storeName,
"readonly").objectStore(l.storeName);var A=a.sort(d),F=q.bound(a[0],a[a.length-1],false,false),r=l.openCursor(F),G={},B=0;r.onsuccess=function(){var a=r.result;if(a){for(var d=a.key;d>A[B];)if(++B===A.length)return void f(G);if(d===A[B]){var k=a.value;void 0===k&&(k=null);G[d]=k;a.continue()}else a.continue(A[B])}else f(G)};r.onerror=function(){h(r.error)}}).catch(h)})}function z(a){var d=this;return new Promise(function(k,f){d.ready().then(function(){return u(d)}).then(function(h){var l=d._dbInfo;
l.db.transaction(function(d){for(var q=Array(a.length),r=0,A=a.length;A>r;r++)q[r]="?";d.executeSql("SELECT * FROM "+l.storeName+" WHERE (key IN ("+q.join(",")+"))",a,function(a,d){a={};d=d.rows;for(var f=0,l=d.length;l>f;f++){var n=d.item(f),q=n.value;q&&(q=h.deserialize(q));a[n.key]=q}k(a)},function(a,d){f(d)})})}).catch(f)})}function v(a,d){if(arguments.length&&null!==a){var f=this.driver();f=f===this.INDEXEDDB?t.apply(this,arguments):f===this.WEBSQL?z.apply(this,arguments):h.apply(this,arguments)}else f=
function(){var a={};return this.iterate(function(d,f){a[f]=d}).then(function(){return a})}.apply(this);return w(f,d),f}function x(a){(a=Object.getPrototypeOf(a))&&(a.getItems=v,a.getItems.indexedDB=function(){return t.apply(this,arguments)},a.getItems.websql=function(){return z.apply(this,arguments)},a.getItems.generic=function(){return h.apply(this,arguments)})}f="default"in f?f.default:f;var q="undefined"!=typeof IDBKeyRange?IDBKeyRange:"undefined"!=typeof webkitIDBKeyRange?webkitIDBKeyRange:"undefined"!=
typeof mozIDBKeyRange?mozIDBKeyRange:void 0;f=x(f);r.localforageGetItems=v;r.extendPrototype=x;r.extendPrototypeResult=f;r.getItemsGeneric=h});
(function(r,f){"object"==typeof exports&&"undefined"!=typeof module?f(exports,require("localforage")):"function"==typeof define&&define.amd?define(["exports","localforage"],f):f(r.localforageSetItems=r.localforageSetItems||{},r.localforage)})(this,function(r,f){function u(a){return u.result?u.result:a&&"function"==typeof a.getSerializer?u.result=a.getSerializer():Promise.reject(Error("localforage.getSerializer() was not available! localforage v1.4+ is required!"))}function w(a,d){d&&a.then(function(a){d(null,
a)},function(a){d(a)})}function y(a,d,f,h){function k(a,d){var f=a||d;return a&&"function"==typeof a||"string"!=typeof f||(a=function(a){return a[f]}),a}var l=[];if("[object Array]"==={}.toString.call(a)){d=k(d,"key");f=k(f,"value");for(var q=0,r=a.length;r>q;q++){var t=a[q];l.push(h(d(t),f(t)))}}else for(q in a)a.hasOwnProperty(q)&&l.push(h(q,a[q]));return l}function h(a,d,f,h){var k=this,l=k.ready().then(function(){return new Promise(function(l,h){function q(a){a=a.target||this;r=a.error||a.transaction.error;
h(r)}var r,t=k._dbInfo,n=t.db.transaction(t.storeName,"readwrite"),u=n.objectStore(t.storeName);n.oncomplete=function(){l(a)};n.onabort=n.onerror=function(a){h(r||a.target)};y(a,d,f,function(a,d){null===d&&(d=void 0);u.put(d,a).onerror=q})})});return w(l,h),l}function t(a,d,f,h){var k=this,l=new Promise(function(l,h){k.ready().then(function(){return u(k)}).then(function(q){var r=k._dbInfo;r.db.transaction(function(k){var n="INSERT OR REPLACE INTO "+r.storeName+" (key, value) VALUES (?, ?)",t=y(a,
d,f,function(a,d){return new Promise(function(f,l){q.serialize(d,function(d,h){h?l(h):k.executeSql(n,[a,d],function(){f()},function(a,d){l(d)})})})});Promise.all(t).then(function(){l(a)},h)},function(a){h(a)})}).catch(h)});return w(l,h),l}function z(a,d,f,h){var k=this;a=y(a,d,f,function(a,d){return k.setItem(a,d)});a=Promise.all(a);return w(a,h),a}function v(a,d,f,q){var k=this.driver();return k===this.INDEXEDDB?h.call(this,a,d,f,q):k===this.WEBSQL?t.call(this,a,d,f,q):z.call(this,a,d,f,q)}function x(a){(a=
Object.getPrototypeOf(a))&&(a.setItems=v,a.setItems.indexedDB=function(){return h.apply(this,arguments)},a.setItems.websql=function(){return t.apply(this,arguments)},a.setItems.generic=function(){return z.apply(this,arguments)})}var q=x(f="default"in f?f.default:f);r.setItemsGeneric=z;r.localforageSetItems=v;r.extendPrototype=x;r.extendPrototypeResult=q});
(function(r,f){"object"==typeof exports&&"undefined"!=typeof module?f(exports,require("localforage")):"function"==typeof define&&define.amd?define(["exports","localforage"],f):f(r.localforageRemoveItems=r.localforageRemoveItems||{},r.localforage)})(this,function(r,f){function u(f,a){return a&&f.then(function(d){a(null,d)},function(d){a(d)}),f}function w(f,a){for(var d=[],k=0,h=f.length;h>k;k++)d.push(this.removeItem(f[k]));f=Promise.all(d);return u(f,a),f}function y(f,a){var d=this,h=d.ready().then(function(){return new Promise(function(a,
h){function l(a){a=a.target||this;k||(k=a.error||a.transaction.error,h(k))}var k,q=d._dbInfo,r=q.db.transaction(q.storeName,"readwrite");q=r.objectStore(q.storeName);r.oncomplete=function(){a()};r.onabort=r.onerror=function(){k||h(r.error||"Unknown error")};for(var t=0,u=f.length;u>t;t++){var n=f[t];"string"!=typeof n&&(console.warn(n+" used as a key, but it is not a string."),n+="");q.delete(n).onerror=l}})});return u(h,a),h}function h(f,a,d){return new Promise(function(h,q){f.executeSql(a,d,function(){h()},
function(a,d){q(d)})})}function t(f,a){var d=this,k=d.ready().then(function(){return new Promise(function(a,k){var l=d._dbInfo;l.db.transaction(function(d){for(var q=l.storeName,r=[],t=0,u=f.length;u>t;t++){var n=f[t];"string"!=typeof n&&(console.warn(n+" used as a key, but it is not a string."),n+="");r.push(h(d,"DELETE FROM "+q+" WHERE key \x3d ?",[n]))}Promise.all(r).then(a,k)},function(a){k(a)})})});return u(k,a),k}function z(){var f=this.driver();return f===this.INDEXEDDB?y.apply(this,arguments):
f===this.WEBSQL?t.apply(this,arguments):w.apply(this,arguments)}function v(f){(f=Object.getPrototypeOf(f))&&(f.removeItems=z,f.removeItems.indexedDB=function(){return y.apply(this,arguments)},f.removeItems.websql=function(){return t.apply(this,arguments)},f.removeItems.generic=function(){return w.apply(this,arguments)})}var x=v(f="default"in f?f.default:f);r.localforageRemoveItems=z;r.extendPrototype=v;r.extendPrototypeResult=x;r.removeItemsGeneric=w});
